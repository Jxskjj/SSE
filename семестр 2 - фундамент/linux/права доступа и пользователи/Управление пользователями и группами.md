Учетные записи пользователей и групп необходимы для разграничения доступа и управления разрешениями в системе. Администратор (пользователь `root`) управляет ими с помощью набора специальных команд.

#### **Создание пользователей**
Для создания пользователя используется команда `useradd`.
```bash
useradd alice
```
Эта команда создаст пользователя `alice` со стандартными параметрами:
- Создаст домашнюю директорию `/home/alice` (если не отключено опцией).
- Скопирует файлы из `/etc/skel` (шаблон оболочки) в домашнюю директорию.
- Назначит пользователю его **первичную (primary) группу** с таким же именем (`alice`).

**Часто используемые опции:**
- `-m` (`--create-home`): Создать домашнюю директорию (актуально, если в настройках по умолчанию это отключено).
- `-s /bin/bash`: Задать командную оболочку пользователя (например, `/bin/bash`, `/bin/zsh`, `/sbin/nologin`).
- `-g group`: Указать первичную группу (по умолчанию — группа с именем пользователя).
- `-G group1,group2`: Добавить пользователя в дополнительные (вторичные) группы.
- `-c "Alice Cooper"`: Добавить комментарий (обычно полное имя пользователя).

**Пример с опциями:**
```bash
useradd -m -s /bin/bash -c "Alice Cooper" -G developers,sales alice
```
После создания пользователя **обязательно нужно установить пароль** командой `passwd`:
```bash
passwd alice
```

---

#### **Изменение свойств пользователя**

Для изменения уже созданного пользователя используется команда `usermod`. Она использует те же опции, что и `useradd`.
```bash
usermod -aG sudo alice     # Добавить пользователя alice в группу sudo (для прав администратора)
usermod -s /bin/zsh alice  # Изменить оболочку пользователя на zsh
usermod -L alice           # Заблокировать (LOCK) учетную запись пользователя
usermod -U alice           # Разблокировать (UNLOCK) учетную запись
```
**Важно:** Опция `-aG` (append to Groups) **добавляет** пользователя в новые группы, не трогая старые. Без `-a` пользователь будет удален из всех групп, не указанных в текущей команде.

---

#### **Удаление пользователей**

Удаление выполняется командой `userdel`.
```bash
userdel alice     # Удалит пользователя, но оставит его домашнюю директорию.
userdel -r alice  # Удалит пользователя вместе с его домашней директорией 
```
**Внимание:** Опция `-r` безвозвратно удаляет все личные файлы пользователя.

---
#### **Создание групп**
Для создания группы используется команда `groupadd`.
```bash
groupadd developers  # Создаст группу с именем 'developers'
```
- **GID (Group ID):** Каждой группе назначается уникальный числовой идентификатор. Он назначается автоматически, но его можно задать вручную с помощью опции `-g` (например, `-g 1010`).

---
#### **Изменение групп**
Команда `groupmod` позволяет изменить имя группы или её GID.
```bash
groupmod -n devs developers  # Переименовать группу 'developers' в 'devs'
groupmod -g 1020 devs        # Изменить GID группы 'devs' на 1020
```
**Важно:** Изменение GID может сломать права доступа к файлам, принадлежащим этой группе. Необходимо будет обновить владельца файлов с помощью `chown`.

---
#### **Управление членством в группах**
Основной инструмент — команда `gpasswd`. Она также позволяет задать пароль для группы (используется с `newgrp`, как описано в вашем конспекте).
```bash
gpasswd -a alice developers  # Добавить пользователя alice в группу developers
gpasswd -d alice developers  # Удалить пользователя alice из группы developers
gpasswd -M alice,bob,carl developers  # Задать СПИСОК членов группы (старые будут удалены!)
```
**Ключевое различие:**
- `usermod -aG` — управление со стороны пользователя (какие группы у него есть).
- `gpasswd -a/-d/-M` — управление со стороны группы (кто в ней состоит).
    
---
#### **Удаление групп**

Удаление группы выполняется командой `groupdel`.
```bash
groupdel developers
```
**Ограничение:** Нельзя удалить группу, которая является **первичной (primary)** для какого-либо существующего пользователя. Сначала нужно изменить первичную группу пользователя или удалить самого пользователя.

---
#### **Просмотр информации**

- `id [username]` — показать UID, GID и группы, в которых состоит пользователь.
- `groups [username]` — показать список групп пользователя.
- `getent group groupname` — показать информацию о группе и её членах.
- Просмотр файлов конфигурации:
    - `/etc/passwd` — информация о пользователях (логин, UID, GID, оболочка).
    - `/etc/group` — информация о группах.
    - `/etc/shadow` — зашифрованные пароли пользователей (только для `root`).

**Ключевое правило:** Для выполнения всех этих команд (кроме `id` и `groups` для себя) требуются **права суперпользователя (`root`)**. Используйте `sudo` перед командой, если вы работаете не из-под `root`.